{% extends 'layout.html' %}
{% load static %}

{% block title %}Dashboard{% endblock %}

{% block static_files %}
    <link rel="stylesheet" href="{% static 'global-styles.css' %}">
    <link rel="stylesheet" href="{% static 'dashboard/styles/styles.css' %}">
    <script src="{% static 'dashboard/scripts/scripts.js' %}"></script>

    {% for widget in default_widgets %}
        <link rel="stylesheet" href="{% static 'dashboard/styles/'|add:widget.widget_type|add:'.css' %}">
        <script src="{% static 'dashboard/scripts/'|add:widget.widget_type|add:'.js' %}" defer></script>
    {% endfor %}
    {% for widget in widgets %}
        <link rel="stylesheet" href="{% static 'dashboard/styles/'|add:widget.widget_type|add:'.css' %}">
        <script src="{% static 'dashboard/scripts/'|add:widget.widget_type|add:'.js' %}" defer></script>
    {% endfor %}

{% endblock %}



{% block content %}

    <!-- Constantly showing -->
    <div id="thin-sidebar">
        <div id="hamburger-menu" onclick="toggleSidebar()">☰</div>
        <div class="sidebar-icon" onclick="navigateTo('home')">🏠</div>
        <div class="sidebar-icon" onclick="navigateTo('calendar')">📅</div>
        <div class="sidebar-icon" onclick="navigateTo('settings')">⚙️</div>
        <div class="sidebar-icon" onclick="navigateTo('profile')">👤</div>
    </div>

    <!-- Extended Sidebar -->
    <div id="sidebar">
        <button id="close-btn" onclick="toggleSidebar()">×</button>
        <h2>Dashboard</h2>
        <ul>
            <li><a href="#">🏠 Home</a></li>
            <li><a href="#">📅 Calendar</a></li>
            <li><a href="#">⚙️ Settings</a></li>
            <li><a href="#">👤 Profile</a></li>
        </ul>
    </div>

    <div id='main-content'>
        <!-- Default Widgets -->
        {% for widget in default_widgets %}
        <div class="widget" id="{{ widget.widget_type }}" 
            style="left: {{ widget.position.x }}px; top: {{ widget.position.y }}px;">

            <!-- Drag Icon -->
            <div class="drag-handle">⋮⋮</div>
            
            {% include widget.template %}
        </div>
        {% endfor %}

        <!-- User Widgets -->
        {% for widget in widgets %}
            <div class="widget" id="widget-{{ widget.id }}" 
                style="left: {{ widget.position.x }}px; top: {{ widget.position.y }}px;">

                <!-- Drag Icon -->
                <div class="drag-handle">⋮⋮</div>

                {% include widget.template %}
            </div>
        {% endfor %}
    <div>

{% endblock %}

